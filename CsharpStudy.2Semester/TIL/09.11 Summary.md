## TODAY NOTE C# [DataSource]  [ 25.09.11 ]

## 1. 왜 테스트가 중요한가? (소프트웨어 품질)

- 올바른 완성의 기준: 단순히 클래스를 작성하는 것이 개발의 끝이 아닙니다. 버그 없이 의도대로 동작하는 품질까지 고려해야 진짜 완성
- 품질 향상: 테스트는 소프트웨어의 품질을 보장하는 핵심적인 활동
- 테스트 코드를 작성하면 새로운 기능을 추가하거나 코드를 수정(리팩터링)할 때 기존 기능이 망가지는 것을 방지하고, 안정적인 개발 속도를 유지 가능

## 2. 테스트의 종류와 방법론

**테스트 종류**

- 수동 테스트: 사람이 직접 기능을 실행하며 확인하는 방법

- 단위 테스트(Unit Test): 함수나 메서드 등 가장 작은 코드 단위를 테스트하며, 오늘 수업의 핵심

- 통합 테스트: 여러 클래스나 기능이 서로 연결되어 잘 동작하는지 함께 테스트

**테스트 방법론**

- 화이트박스 테스트: 코드의 내부 구조와 로직을 보면서 테스트하는 방법
- 블랙박스 테스트: 내부 코드는 보지 않고, 사용자처럼 입력과 결과값만 보고 기능이 잘 동작하는지 테스트하는 방법

## 3. 테스트하기 좋은 코드 설계: Repository 패턴

- 단위 테스트를 쉽게 하려면 코드의 각 부분이 독립적이고 의존성이 낮아야 함

- Repository 패턴은 이를 위한 아주 효과적인 설계 방법입

**관심사 분리(Separation of Concerns)**

- 비즈니스 로직(게임 규칙 등)과 데이터 소스(DB, 파일, 서버 등)를 분리하는 것이 핵심

**주요 구성 요소**

- Model: 순수한 데이터 구조를 정의하는 객체 (예: Item, Player).
- DataSource: 파일 저장/로드, 서버 통신 등 실제 데이터 저장 매체와 직접 소통하는 부분
- Repository: 비즈니스 로직과 DataSource 사이의 중재자입니다. DataSource를 통해 데이터를 가져와서, 비즈니스 로직이 필요로 하는 형태로 가공하여 전달하는 역할

## 4. 테스트를 위한 Mock 객체와 의존성 주입

- Test Double (테스트 대역): 이런 외부 의존성을 해결하기 위해 실제 객체인 척하는 가짜 객체를 만들어 테스트에 사용합니다. 그중 하나가 Mock 객체

- 의존성 주입 (Dependency Injection):

- 클래스 내부에서 new DataSource()처럼 객체를 직접 생성하는 것은 의존성이 높아 테스트하기 어려움 -> 클래스 외부에서 생성한 객체를 생성자를 통해 전달받는 방식을 사용

- 이렇게 하면 실제 운영 코드에서는 RealDataSource를, 테스트 코드에서는 MockDataSource를 주입하여 외부 환경과 완전히 분리된 테스트를 진행가능

