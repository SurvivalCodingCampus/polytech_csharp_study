# 20250915 수업내용 정리

# DTO, Mapper

### 데이터소스를 모델로 정의하기 어려운 경우
* 동적 JSON
* 서버에서 잘못된 값을 보내는 경우
* 서버 API 변경으로 인한 필드 누락/제거
* 서버 장애시 예상치 못한 응답 구조
* 클라이언트/서버 버전 불일치

### 서버 잘못에 클라이언트 독박에 대비하기 위해 방어적 코드 작성 필요

### DTO(Date Transfer Object)
* 데이터 소스를 모델 클래스로 변환하는 과정에서 순수하게 클래스에 담기 위한 중간 전달 객체
* 잘못된 데이터 소스를 받더라도 안 터지게 하려는 방어 수단
* 정보를 담는 곳
* 모든 필드가 Nullable 변수
* 직렬화, 역직렬화 가능하도록
* Json을 그대로 안 터지게 받아들인다.

### 모델 클래스 역학 재정의
* 모든 필드는 non-nullable 상수
* equals 재정의
* hashcode 재정의
* tostring 재정의
* 실제 필요한 내용으로만 구성

### Mapper
* DTO를 모델 클래스로 변환
* 순수한 데이터(DTO)를 모델 클래스로 변환하기 위한 로직은 별도의 mapper를 통해 변환
* DTO를 모델 클래스로 변환하는 메소드
* DTO 전체를 변환하는 것이 아닌 필요한 부분만 변환
* 작성시 DTO안에 작성하지 않고 static 또는 extension을 선호하는 이유
  * 데이터 저장용 클래스와 변환 로직을 분리
  * Mapper는 복잡한 로직이 포함될 수 있어서 인간이 작성, 문제 있으면 여기만 확인

### DTO가 필요한 이유
* Model Class는 non-nullable 값만 가지고 있도록 한다.
* Json 데이터는 null 값을 포함할 수 있다
* Map -> Model Class 변환시 null 값 등의 예외를 사전에 걸러내기 용이
* 불완전한 코드가 포함될 것 같다면 DTO 도입
* Json 값에 예외가 없다면 반드시 DTO를 도입할 필요 없음